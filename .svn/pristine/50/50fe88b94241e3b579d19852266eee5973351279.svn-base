@extends('common.header')

@section('content')

    <link href="{{ asset('css/register.css') }}" rel="stylesheet">
    <style>
        .layui-card{box-shadow: 0 0 0 0 ;font-size: 1rem;color: black;margin: 0 auto;}
        .layui-form {margin-top: 2rem;}
        .form{margin: 1rem auto 0 auto !important;width: 60%;padding-bottom: 2rem;}
        .form .tj-label{width: 165px;margin-left: -76px;}
        .form .tj-input{width: 92%}
        .form .tj-inline{width: 82%;margin-right: 0;}
        .form .xxdz-inline{width: 81.8%;margin-right: 0;}
    </style>

    <div id="banner">
        <div class="banner-img">
            <div class="layui-container">
                <div class="banner-content">{{$type == 'personal' ? '个人' : '企业'}}注册<br>欢迎您注册美和国际物流{{$type == 'personal' ? '个人' : '企业'}}用户</div>
            </div>
        </div>
    </div>
    <div class="layui-container">
        <div class="content">
            @for($i = 1;$i < 7; $i++)
                @php
                    $imgType = $nowStep >= $i ? '1' : '0'
                @endphp
                <div class="step layui-inline">
                    <div><span class="title-header">{{$i}}</span><img src="{{asset('images/register-tip'.$imgType.'.png')}}"><span class="title-footer @if($nowStep >= $i) active @endif">{{$titles[$i-1]}}</span></div>
                </div>
            @endfor
            <form class="layui-form" action="">
                {{csrf_field()}}
                <div class="layui-card">
                    <div class="layui-card-header">发件人信息</div>
                        <div class="layui-card-body">
                            <div class="form">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">姓<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">名<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">国家：</label>
                                    <div class="layui-input-inline text-left">
                                        美国/U.S
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">州<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <select name="city" lay-verify="required">
                                            <option value=""></option>
                                            <option value="0">北京</option>
                                            <option value="1">上海</option>
                                            <option value="2">广州</option>
                                            <option value="3">深圳</option>
                                            <option value="4">杭州</option>
                                        </select>
                                    </div>
                                    <label class="layui-form-label">州<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">证件信息<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <select name="city" lay-verify="required">
                                            <option value=""></option>
                                            <option value="0">北京</option>
                                            <option value="1">上海</option>
                                            <option value="2">广州</option>
                                            <option value="3">深圳</option>
                                            <option value="4">杭州</option>
                                        </select>
                                    </div>
                                    <label class="layui-form-label"></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" placeholder="证件号" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label tj-label">发件国退件地址(方便退件)<i>*</i></label>
                                    <div class="layui-input-inline tj-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input tj-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">退件邮编<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">手机<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input">
                                    </div>
                                    <label class="layui-form-label">固话<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>

                <div class="layui-card">
                    <div class="layui-card-header">收件人信息</div>
                        <div class="layui-card-body">
                            <div class="form">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">所在国家<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <select name="city" lay-verify="required">
                                            <option value=""></option>
                                            <option value="0">北京</option>
                                            <option value="1">上海</option>
                                            <option value="2">广州</option>
                                            <option value="3">深圳</option>
                                            <option value="4">杭州</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">姓名<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">详细地址<i>*</i></label>
                                    <div class="layui-input-inline xxdz-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input tj-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">邮编<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">手机<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input">
                                    </div>
                                    <label class="layui-form-label">固话<i>*</i></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" required  lay-verify="required" lay-vertype="tips" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">QQ/微信</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="emailverifycode" lay-vertype="tips" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <button class="layui-btn sub-btn" lay-submit lay-filter="do">下一步</button>
                                </div>
                            </div>
                        </div>
                </div>
            </form>
        </div>
    </div>
    @include('common.footer')

    <script>
        layui.use(['form','element'], function(){
            var form = layui.form
                ,element = layui.element
                ,$ = layui.jquery;

            //layer.alert('请您进一步完善个人信息，以便我们更好的为您提供服务。',{title:'您已完成邮箱验证',btn:['好的']});

            $(".email-resend").on('click',function () {
                var btn = $(this);
                $.get('{{url('/register/two/'.$type.'/sendEmail')}}',function (result) {
                    if (result.status == 200){
                        btn.addClass("layui-btn-disabled");
                        //n秒后重发
                        var s = 60;
                        btn.text(s+"后重发")
                        var time = setInterval(function() {
                            s = s-1;
                            btn.text(s+"后重发");
                            if (s <= 0) {
                                clearInterval(time);
                                btn.text("重新获取").removeClass('layui-btn-disabled');
                            }
                        }, 1000);
                    } else {
                        layer.alert(result.msg);
                    }
                })
            });

            form.on('submit(do)', function(data){
                $.ajax({
                    type : "POST",
                    url : "{{url()->current().'/do'}}",
                    data : data.field,
                    dataType: 'json',
                    success : function(result) {
                        console.log(result);
                        if (result.status == 200){
                            window.location.href='{{url('/register/three/'.$type)}}';
                        } else {
                            layer.alert(result.msg);
                        }
                    },
                    error: function (error) {
                        var errors = error.responseJSON.errors;
                        $.each(errors, function (key, value) {
                            layer.msg(value[0]);
                            return false;
                        });
                    }
                });
                return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
            });
        });
    </script>
@endsection